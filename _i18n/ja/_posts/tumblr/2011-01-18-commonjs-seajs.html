---
layout: post
title: CommonJSに基づいたモジュール管理ローダーSeaJS
date: '2011-01-18T14:36:00+09:00'
tags:
- JavaScript
- CommonJS
- module
- YUI
permalink: /post/2807412128
---
<blockquote>
<p class="jser-sitelink"><strong>打造最出色的模块加载框架：SeaJS Module Loader v0.3.0 预览版 - 岁月如歌</strong><br/><a title="打造最出色的模块加载框架：SeaJS Module Loader v0.3.0 预览版 - 岁月如歌" href="http://lifesinger.org/blog/2011/01/seajs-v0-3-0pre/" target="_blank">http://lifesinger.org/blog/2011/01/seajs-v0-3-0pre/</a></p>
</blockquote>
<p>モジュールのロードに最適なフレームワークを作成するためには&#160;: SeaJS Module Loader v0.3.0 プレビュー版 というタイトルでJavaScriptでのモジュール化について書かれています。</p>
<p>以下は簡単な内容紹介です。(コード部分は含んでないです)<br/>scriptタグでjsファイルを複数ロードする場合は4つの問題があります。<br/> -ブロッキング<br/> -名前空間の汚染の可能性<br/> -依存関係を書く人が知っておく必要性<br/> -HTTPリンクが多すぎる<br/> それぞれを解決する典型的な方法もそれぞれ4つ上げられていています。<br/> -LabJS, HeadJS, ControlJSなどの非同期スクリプトローダーの利用<br/> -Xといった一つのグローバルを用意してその下にX.bizなどと拡張する<br/> -フレームワークに用意されているモジュール機構を利用する。(YUI3ならYUI.add,YUI.use)<br/> -一つのファイルとしてマージする<br/> YUI3における解決方法が紹介されてるが、YUI3にはまだ改善点があると述べています。<br/> -モジュール管理機構が冗長過ぎる<br/> -YUIのファイルサイズ自体が大きすぎる<br/> -YUI.useでの直感的でない書き方<br/> -YUI3のモジュールはYUI3でしか使えない<br/> CommonJS自体にはSeaJSの方が適しています。<br/> SeaJS はCommonJSに影響を受けて作成されていて以下のコアコンセプトがあります。<br/> -機能を単一なものとして分離<br/> -モジュールのパスとファイル名で識別(別途指定しなくてもいい)<br/> -必要となるまでは実行しない<br/> SeaJS Module Loaderには次のAPIがあります。<br/> 1. モジュールの宣言:module.declare(id?, deps, factory)<br/> 2. モジュールの提供:module.provide(ids, callback)<br/> 3. require(id)</p>
<p>YUIとSeaJSを比べて、SeaJS には次の利点があります。<br/> -圧縮する前で3.3k,圧縮して1.7kと小さい<br/> -非依存モジュールは並列ダウンロード<br/> -全体のCPU消費や必要となるまで実行しないためCPUに優しい<br/> -設定ファイルではなくデータの構成に基づいている<br/> -相対パスのサポートなどCommonJSに基づいている<br/> コードは<a title="seajs/seajs - GitHub" href="https://github.com/seajs/seajs" target="_blank">seajs/seajs - GitHub</a>で公開されています。(フォーク歓迎)</p>
<p>という感じで適当に内容を書き出してみました。(機械翻訳便りなので突っ込みどころ満載だと思います)<br/> 中国では<a title="dexteryy/OzJS - GitHub" href="https://github.com/dexteryy/OzJS" target="_blank">dexteryy/OzJS - GitHub</a>といい、モジュール管理に注目してる人たちがいるみたいです。</p>
