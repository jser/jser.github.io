---
layout: post
title: '2014-04-29のJS: Firefox29、Promises、ES6へ向けて'
date: '2014-04-30T00:50:19+09:00'
tags:
- Firefox
- Promises
- ECMAScript
permalink: /post/84230597159/2014-04-29-js-firefox29-promises-es6
---
<p>JSer.info #172 - <a href="http://www.mozilla.org/en-US/firefox/29.0/releasenotes/" title="Firefox — Notes — Mozilla" target="_blank">Firefox 29</a>がリリースされました。
<a href="http://utaukitune.ldblog.jp/archives/65771046.html" title="歌うキツネ : Firefox 28までと Firefox 29以降の ユーザインタフェース(UI)の違い" target="_blank">UI的にも大きな変更</a>がありますが、ES6 PromisesやSharedWorker、ECMAScript i18n APIの実装など追加されています。
特にWebWorker内から<code>console</code>に触れるようになったり、worker周りの変更が色々あるみたいです。</p>

<p>またオプションの変更が必要ですが<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables" title="CSS variables" target="_blank">CSS variables</a>の実装等もされています</p>

<ul><li><a href="https://developer.mozilla.org/en-US/Firefox/Releases/29" title="Firefox 29 for developers - Mozilla | MDN" target="_blank">Firefox 29 for developers - Mozilla | MDN</a></li>
</ul><hr><p>Firefox29、Chrome35で実装されているES6 Promisesのpolyfillである<a href="https://github.com/jakearchibald/es6-promise" title="ES6-Promises" target="_blank">ES6-Promises</a>も1.0.0がリリースされて、結構前にあったES6の仕様変更に追従されています。(ES6 PromisesのAPIの変更はもうないと思います)</p>

<p>また、Angularでは<a href="http://blog.angularjs.org/2014/03/angular-20.html" title="AngularJS 2.0 | AngularJS" target="_blank">2.0</a>に入れるPromisesを使った実装がについてのデザインとDIの仕組みが<a href="https://github.com/angular/deferred" title="Angular 2.0 Deferred/Promise" target="_blank">Angular 2.0 Deferred/Promise</a>で進められています。(1.xでは<a href="https://docs.angularjs.org/api/ng/service/%24q" title="$q" target="_blank">$q</a>というのがそれ)</p>

<ul><li><a href="https://github.com/angular/angular.js/issues/6697" title="Decouple $q in AngularJS 2.0 (and/or switch to bluebird) · Issue #6697 · angular/angular.js" target="_blank">Decouple $q in AngularJS 2.0 (and/or switch to bluebird) · Issue #6697 · angular/angular.js</a></li>
</ul><p>Node.js 0.12でもV8経由でPromisesが入るので、この機会に触ってみるといいかもしれませんね。</p>

<ul><li><a href="http://www.slideshare.net/shigeki_ohtsu/node-v012tng12" title="Node-v0.12の新機能について" target="_blank">Node-v0.12の新機能について</a></li>
</ul><p>自分の方でも、ES6 Promiseについて<a href="http://azu.github.io/promises-book/" title="Promises book" target="_blank">Promises book</a>（仮）というものを書いています。</p>

<p>基本的な使い方の部分については大体書いたので、その辺については参考になるかもしれません。</p>

<p>今は最終章を進めてるのでそれが終わったら細かいところを直していきます。
(結構勢いで書いてる部分も多いので、修正<a href="https://github.com/azu/promises-book/pulls" title="Pull Requests · azu/promises-book" target="_blank">Pull Requests</a>待ってます!)</p>

<ul><li><a href="https://github.com/azu/promises-book/issues/5" title="第4章の内容を決定する · Issue #5 · azu/promises-book" target="_blank">第4章の内容を決定する · Issue #5 · azu/promises-book</a></li>
</ul><hr><p><a href="http://www.hakkalabs.co/articles/ecmascript-6-at-facebook" title="Regenerator, AST, and ES6 at Facebook" target="_blank">Regenerator, AST, and ES6 at Facebook</a> で公開されている<a href="https://www.youtube.com/watch?v=z_qc4T4BCGc" title="▶ Regenerator, AST, and ES6 at Facebook (Tech Talk by Ben Newman) - YouTube" target="_blank">動画</a>と<a href="http://benjamn.github.io/pivotal-meetup-talk/#/" title="Technical and Social Progress Toward ECMAScript 6 at Facebook" target="_blank">スライド</a>では、JavaScript ASTを使った変換ツール、またそれを社内でどう運用するか等について話されています。</p>

<p>facebookでのJavaScriptにおいて、<a href="http://benjamn.github.io/pivotal-meetup-talk/#/23" title="Technical and Social Progress Toward ECMAScript 6 at Facebook" target="_blank">オレオレクラスとLintツールと解説を用意して</a>運用しても、<a href="http://benjamn.github.io/pivotal-meetup-talk/#/24" title="Technical and Social Progress Toward ECMAScript 6 at Facebook" target="_blank">だれも解説を読まないし、オレオレクラスについて学ぼうとは思わない</a>となった。</p>

<p>そのため、ES5でES6のようなもの(オレオレclass)を書くのではなく、ES6で書いたものをES5に変換して運用した方がよりシンプルで人間やツールにとっても優しい という話など結構踏み込まれた内容が話されています。</p>

<p>また、発表者は<a href="https://github.com/facebook/regenerator" title="regenerator" target="_blank">regenerator</a>の作者でもありますが、そのような難しいサイドプロジェクトをする<a href="http://benjamn.github.io/pivotal-meetup-talk/#/56" title="Motivation" target="_blank">モチベーション</a>や<a href="http://benjamn.github.io/pivotal-meetup-talk/#/60" title="Technical and Social Progress Toward ECMAScript 6 at Facebook" target="_blank">フィードバックを受けやすくする</a>にはどうするか等についても話されていてJavaScript関係なく参考になる話が多いです。</p>

<hr><h3 class="site-genre">ヘッドライン</h3>

<blockquote cite="http://www.mozilla.org/en-US/mobile/29.0/releasenotes/" title="Firefox — Notes — Mozilla">
<p class="jser-sitelink"><strong>Firefox — Notes — Mozilla</strong></p><footer><cite><a href="http://www.mozilla.org/en-US/firefox/29.0/releasenotes/" title="Firefox — Notes — Mozilla" target="_blank">www.mozilla.org/en-US/firefox/29.0/releasenotes/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">firefox</span><span class="jser-tag">ReleaseNote</span></p>

<p>Firefox29リリース。</p>

<p><code>box-sizing</code>がunprefixに、ECMAScript i18n APIの実装、ES6 Promises、SharedWorker、webworkerから扱えるものが増えた、Gamepad APIが有効に</p>

<ul><li><a href="https://developer.mozilla.org/en-US/Firefox/Releases/29" target="_blank">Firefox 29 for developers - Mozilla | MDN</a></li>
</ul><blockquote cite="http://blog.jqueryui.com/2014/04/jquery-ui-1-11-0-beta-1/" title="jQuery UI 1.11.0-beta.1 | jQuery UI Blog">
<p class="jser-sitelink"><strong>jQuery UI 1.11.0-beta.1 | jQuery UI Blog</strong></p><footer><cite><a href="http://blog.jqueryui.com/2014/04/jquery-ui-1-11-0-beta-1/" title="jQuery UI 1.11.0-beta.1 | jQuery UI Blog" target="_blank">blog.jqueryui.com/2014/04/jquery-ui-1-11-0-beta-1/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">jQuery</span><span class="jser-tag">UI</span><span class="jser-tag">ReleaseNote</span></p>

<p>jQuery UI 1.11.0βリリース</p>

<p>IE7のサポート終了、ワークアラウンドはまだ残ってるけど1.12でコードベースから削除される</p>

<blockquote cite="http://blog.jquery.com/2014/04/18/jquery-1-11-1-rc2-and-2-1-1-rc2-released/" title="jQuery 1.11.1 RC2 and 2.1.1 RC2 Released | Official jQuery Blog">
<p class="jser-sitelink"><strong>jQuery 1.11.1 RC2 and 2.1.1 RC2 Released | Official jQuery Blog</strong></p><footer><cite><a href="http://blog.jquery.com/2014/04/18/jquery-1-11-1-rc2-and-2-1-1-rc2-released/" title="jQuery 1.11.1 RC2 and 2.1.1 RC2 Released | Official jQuery Blog" target="_blank">blog.jquery.com/2014/04/18/jquery-1-11-1-rc2-and-2-1-1-rc2-released/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">jQuery</span><span class="jser-tag">ReleaseNote</span></p>

<p>jQuery 1.11.1 RC2と2.1.1 RC2リリース。</p>

<blockquote cite="https://github.com/yyx990803/vue/releases/tag/v0.10.4" title="Release v0.10.4: Release-v0.10.4 · yyx990803/vue">
<p class="jser-sitelink"><strong>Release v0.10.4: Release-v0.10.4 · yyx990803/vue</strong></p><footer><cite><a href="https://github.com/yyx990803/vue/releases/tag/v0.10.4" title="Release v0.10.4: Release-v0.10.4 · yyx990803/vue" target="_blank">github.com/yyx990803/vue/releases/tag/v0.10.4</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">library</span><span class="jser-tag">ReleaseNote</span></p>

<p>Vue.js 0.10.4リリース</p>

<blockquote cite="https://github.com/jakearchibald/es6-promise/releases/tag/1.0.0" title="Release 1.0.0 · jakearchibald/es6-promise">
<p class="jser-sitelink"><strong>Release 1.0.0 · jakearchibald/es6-promise</strong></p><footer><cite><a href="https://github.com/jakearchibald/es6-promise/releases/tag/1.0.0" title="Release 1.0.0 · jakearchibald/es6-promise" target="_blank">github.com/jakearchibald/es6-promise/releases/tag/1.0.0</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">Promises</span><span class="jser-tag">ReleaseNote</span></p>

<p>ES6 Promisesのpolyfillライブラリであるes6-promise 1.0.0リリース。</p>

<p>ES6の仕様に追従した変更として<code>cast</code>がなくなり、<code>resolve</code>を使うようになった</p>

<h3 class="site-genre">アーティクル</h3>

<blockquote cite="http://blogs.msdn.com/b/ie_ja/archive/2014/04/21/whats-new-in-f12-w-windows-8-1-update.aspx" title="Windows 8.1 Update での F12 の新機能 - IEBlog 日本語 - Site Home - MSDN Blogs">
<p class="jser-sitelink"><strong>Windows 8.1 Update での F12 の新機能 - IEBlog 日本語 - Site Home - MSDN Blogs</strong></p><footer><cite><a href="http://blogs.msdn.com/b/ie_ja/archive/2014/04/21/whats-new-in-f12-w-windows-8-1-update.aspx" title="Windows 8.1 Update での F12 の新機能 - IEBlog 日本語 - Site Home - MSDN Blogs" target="_blank">blogs.msdn.com/b/ie_ja/archive/2014/04/21/whats-new-in-f12-w-windows-8-1-update.aspx</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">IE</span><span class="jser-tag">debug</span><span class="jser-tag">Tools</span></p>

<p>IE11のDevToolsのアップデート内容について。</p>

<p>CSSの変更履歴の表示、SourceMapの対応、デバッグ対象のフィルタリング、メモリリーク等を見つけられるスナップショット機能等</p>

<ul><li><a href="http://qiita.com/sora_h/items/f3ef444fa1c1d8d0e9fd" target="_blank">Chrome/Firefox の JavaScript Debugger でステップ実行時にライブラリ・フレームワークをスキップする - Qiita</a></li>
<li><a href="http://msdn.microsoft.com/en-US/library/ie/dn255007%28v=vs.85%29#source_maps" target="_blank">Inspect running JavaScript with the Debugger (Windows)</a></li>
</ul><blockquote cite="http://tatyusa.logdown.com/posts/196064/javascript-period-in-non" title="JavaScriptにおける非同期パターン #翻訳 « Tatyusa's Note">
<p class="jser-sitelink"><strong>JavaScriptにおける非同期パターン #翻訳 «&#160;Tatyusa&#8217;s Note</strong></p><footer><cite><a href="http://tatyusa.logdown.com/posts/196064/javascript-period-in-non" title="JavaScriptにおける非同期パターン #翻訳 « Tatyusa's Note" target="_blank">tatyusa.logdown.com/posts/196064/javascript-period-in-non</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">翻訳</span></p>

<p><a href="http://bredele.github.io/async/" target="_blank">http://bredele.github.io/async/</a> の翻訳。</p>

<p>非同期処理のパターンについて</p>

<blockquote cite="http://www.nczonline.net/blog/2014/04/22/creating-defensive-objects-with-es6-proxies/" title="Creating defensive objects with ES6 proxies | NCZOnline">
<p class="jser-sitelink"><strong>Creating defensive objects with ES6 proxies | NCZOnline</strong></p><footer><cite><a href="http://www.nczonline.net/blog/2014/04/22/creating-defensive-objects-with-es6-proxies/" title="Creating defensive objects with ES6 proxies | NCZOnline" target="_blank">www.nczonline.net/blog/2014/04/22/creating-defensive-objects-with-es6-proxies/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span></p>

<p>Proxy APIについて。 Proxyを使ってObject.sealやpreventExtensionsみたいなプロパティアクセスの制御</p>

<blockquote cite="http://css-tricks.com/icon-fonts-vs-svg/" title="Inline SVG vs Icon Fonts [CAGEMATCH] | CSS-Tricks">
<p class="jser-sitelink"><strong>Inline SVG vs Icon Fonts [CAGEMATCH] | CSS-Tricks</strong></p><footer><cite><a href="http://css-tricks.com/icon-fonts-vs-svg/" title="Inline SVG vs Icon Fonts [CAGEMATCH] | CSS-Tricks" target="_blank">css-tricks.com/icon-fonts-vs-svg/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">画像</span><span class="jser-tag">SVG</span><span class="jser-tag">fonts</span></p>

<p>アイコンフォントとインラインSVの比較。</p>

<p>IE+9/Android3+ならSVGを使う方が良いとこの話</p>

<blockquote cite="http://awardwinningfjords.com/2014/04/21/functional-programming-in-javascript-equals-garbage.html" title="Functional Programming in Javascript === Garbage « Thomas Reynolds">
<p class="jser-sitelink"><strong>Functional Programming in Javascript === Garbage «&#160;Thomas Reynolds</strong></p><footer><cite><a href="http://awardwinningfjords.com/2014/04/21/functional-programming-in-javascript-equals-garbage.html" title="Functional Programming in Javascript === Garbage « Thomas Reynolds" target="_blank">awardwinningfjords.com/2014/04/21/functional-programming-in-javascript-equals-garbage.html</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">関数型プログラミング</span></p>

<p>JavaScriptで関数型スタイルを取るときに気をつけるべきこと。</p>

<p>Immutableにするためにコピーが必要なこと、末尾最適化がないためトランポリン、関数合成と部分適応について</p>

<h3 class="site-genre">スライド、動画関係</h3>

<blockquote cite="http://www.slideshare.net/shigeki_ohtsu/node-v012tng12" title="Node-v0.12の新機能について">
<p class="jser-sitelink"><strong>Node-v0.12の新機能について</strong></p><footer><cite><a href="http://www.slideshare.net/shigeki_ohtsu/node-v012tng12" title="Node-v0.12の新機能について" target="_blank">www.slideshare.net/shigeki_ohtsu/node-v012tng12</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">node.js</span><span class="jser-tag">スライド</span></p>

<p>Node.js 0.12についてのスライド。</p>

<p>ES6の機能の追加、Stream3(又stream1,2の問題点)、動機child_process、<code>beforeExit</code>イベント、新しいvmモジュールについて等</p>

<blockquote cite="http://johnkpaul.github.io/presentations/jsconf-br/es6-now/#/" title="ES6 on the front end">
<p class="jser-sitelink"><strong>ES6 on the front end</strong></p><footer><cite><a href="http://johnkpaul.github.io/presentations/jsconf-br/es6-now/#/" title="ES6 on the front end" target="_blank">johnkpaul.github.io/presentations/jsconf-br/es6-now/#/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">ECMAScript</span><span class="jser-tag">JavaScript</span><span class="jser-tag">スライド</span></p>

<p>ES6の機能を実際に実行しながら紹介してるスライド。</p>

<p>実際に今使う方法としてTraceur、es6fyについて</p>

<blockquote cite="http://www.slideshare.net/wookieb/callbacks-promises-generators-asynchronous-javascript" title="Callbacks, promises, generators - asynchronous javascript">
<p class="jser-sitelink"><strong>Callbacks, promises, generators - asynchronous javascript</strong></p><footer><cite><a href="http://www.slideshare.net/wookieb/callbacks-promises-generators-asynchronous-javascript" title="Callbacks, promises, generators - asynchronous javascript" target="_blank">www.slideshare.net/wookieb/callbacks-promises-generators-asynchronous-javascript</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">スライド</span></p>

<p>JavaScriptの非同期処理のスライド。</p>

<p>Async+コールバックのウォーターフォールな書き方。</p>

<p>Promiseを使って行う場合に、コールバックスタイルをPromiseに変換、既存の関数を利用する方法について。</p>

<p>Generator、thunk、coを使った方法に ついてバランスよくまとまってる。</p>

<p>コールバックベースの関数をPublic APIとして用意して、自分orチームに最適な方法を選んで使うという方針についても書かれてる</p>

<blockquote cite="http://www.hakkalabs.co/articles/ecmascript-6-at-facebook" title="Regenerator, AST, and ES6 at Facebook">
<p class="jser-sitelink"><strong>Regenerator, AST, and ES6 at Facebook</strong></p><footer><cite><a href="http://www.hakkalabs.co/articles/ecmascript-6-at-facebook" title="Regenerator, AST, and ES6 at Facebook" target="_blank">www.hakkalabs.co/articles/ecmascript-6-at-facebook</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">AST</span><span class="jser-tag">動画</span><span class="jser-tag">スライド</span></p>

<p>regeneratorの作者(Facebook社)によるJavaScript ASTによる変換についてのスライド。</p>

<p>ES6 -&gt; ES5の変換の仕組みやfacebook.com内のコードの置き換えた結果やそこから学んだ事について。</p>

<p>変換ツールを運用する際のTipsについても書かれてる。</p>

<p>React、regeneratorの変換、動作の仕組みについて。</p>

<p>また何故このような難しいものをサイドプロジェクトとしてやっているのかについて話されてる。</p>

<ul><li><a href="http://benjamn.github.io/pivotal-meetup-talk/#/" target="_blank">Technical and Social Progress Toward ECMAScript 6 at Facebook</a></li>
<li><a href="https://github.com/benjamn/pivotal-meetup-talk" title="benjamn/pivotal-meetup-talk" target="_blank">benjamn/pivotal-meetup-talk</a></li>
</ul><blockquote cite="http://www.confreaks.com/events/mwjs" title="MountainWest JavaScript 2014 Schedule - Confreaks, LLC">
<p class="jser-sitelink"><strong>MountainWest JavaScript 2014 Schedule - Confreaks, LLC</strong></p><footer><cite><a href="http://www.confreaks.com/events/mwjs" title="MountainWest JavaScript 2014 Schedule - Confreaks, LLC" target="_blank">www.confreaks.com/events/mwjs</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">動画</span><span class="jser-tag">イベント</span></p>

<p>MountainWest JavaScript 2014の動画が公開された。</p>

<p><a href="http://mtnwestjs.org/2014/" target="_blank">http://mtnwestjs.org/2014/</a></p>

<ul><li><a href="https://www.youtube.com/playlist?list=PLVjBwkjgx9fq7x3enYMzgpQkrSvJiI8-X" target="_blank">MountainWest JavaScript 2014 - YouTube</a></li>
</ul><h3 class="site-genre">サイト、サービス</h3>

<blockquote cite="https://github.com/github/linguist/pull/979" title="dramatically enhance colors for javascript and css by maxogden · Pull Request #979 · github/linguist">
<p class="jser-sitelink"><strong>dramatically enhance colors for javascript and css by maxogden · Pull Request #979 · github/linguist</strong></p><footer><cite><a href="https://github.com/github/linguist/pull/979" title="dramatically enhance colors for javascript and css by maxogden · Pull Request #979 · github/linguist" target="_blank">github.com/github/linguist/pull/979</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">github</span><span class="jser-tag">JavaScript</span><span class="jser-tag">CSS</span><span class="jser-tag">color</span></p>

<p>GithubのJavaScriptとCSSの色が変更された。</p>

<p>JSConf color と bootstrapc color</p>

<h3 class="site-genre">ソフトウェア、ツール、ライブラリ関係</h3>

<blockquote cite="https://github.com/angular/deferred" title="angular/deferred">
<p class="jser-sitelink"><strong>angular/deferred</strong></p><footer><cite><a href="https://github.com/angular/deferred" title="angular/deferred" target="_blank">github.com/angular/deferred</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">Promises</span><span class="jser-tag">testing</span><span class="jser-tag">library</span></p>

<p>Promisesを使ったDeferred(主にDIのため)</p>

<p>PromiseMockという同期的にPromise APIのテストをするためのモジュールと、Promiseをモックに置き換えるzoneを提供するPromiseBackendの構成。</p>

<blockquote cite="https://github.com/scottcorgan/lag" title="scottcorgan/lag">
<p class="jser-sitelink"><strong>scottcorgan/lag</strong></p><footer><cite><a href="https://github.com/scottcorgan/lag" title="scottcorgan/lag" target="_blank">github.com/scottcorgan/lag</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">Promises</span><span class="jser-tag">library</span></p>

<p>underscoreのpromises版みたいなライブラリ。</p>

<blockquote cite="http://mozilla.github.io/nunjucks/" title="Nunjucks">
<p class="jser-sitelink"><strong>Nunjucks</strong></p><footer><cite><a href="http://mozilla.github.io/nunjucks/" title="Nunjucks" target="_blank">mozilla.github.io/nunjucks/</a></cite></footer></blockquote>

<p class="jser-tags jser-tag-icon"><span class="jser-tag">JavaScript</span><span class="jser-tag">Mozilla</span><span class="jser-tag">library</span></p>

<p>Mozillaのサービス等で使ってるJavaScriptテンプレートエンジン。</p>
